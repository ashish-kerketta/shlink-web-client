<div class="row-fluid" ng-if="vm.loading">
    <div class="col-md-8 col-md-offset-2 col-sm-12">
        <div class="well text-center no-visits-disclaimer">
            <h3><i class="fa fa-circle-o-notch fa-spin"></i> Loading...</h3>
        </div>
    </div>
</div>
<div class="clearfix"></div>
<table class="table table-striped table-hover short-urls-list" ng-if="! vm.loading">
    <thead>
        <tr>
            <th>Created at</th>
            <th>Short URL</th>
            <th>Original URL</th>
            <th>Tags</th>
            <th>Visits</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="shortUrl in vm.shortUrls.data">
            <td data-th="Created at: ">{{shortUrl.dateCreated | amDateFormat:'YYYY-MM-DD HH:mm'}}</td>
            <td data-th="Short URL: "><a target="_blank" ng-href="{{vm.currentServer.url}}/{{shortUrl.shortCode}}">{{vm.currentServer.url}}/{{shortUrl.shortCode}}</a></td>
            <td data-th="Original URL: "><a target="_blank" ng-href="{{shortUrl.originalUrl}}">{{shortUrl.originalUrl}}</a></td>
            <td data-th="Tags: ">
                <i ng-if="shortUrl.tags.length == 0"><small>No tags</small></i>
                <ul class="list-unstyled list-inline tags-list" ng-if="shortUrl.tags.length > 0">
                    <li class="label tag" ng-repeat="tag in shortUrl.tags" ng-style="{backgroundColor: (tag | color)}">{{tag}}</li>
                </ul>
            </td>
            <td data-th="Visits: ">{{shortUrl.visitsCount}}</td>
            <td>
                <div class="btn-group">
                    <button class="dropdown-toggle btn btn-default options" data-toggle="dropdown">
                        <i class="fa fa-ellipsis-v"></i>
                    </button>
                    <ul class="dropdown-menu options-dropdown">
                        <li>
                            <a ui-sref="server.short-code.visits({shortCode: shortUrl.shortCode, shortUrl: shortUrl})">
                                <i class="fa fa-pie-chart"></i>&nbsp;&nbsp;Visit stats
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#" ng-click="displayModalImage(vm.currentServer.url + '/' + shortUrl.shortCode + '/preview', 'Preview for ' + shortUrl.shortCode)">
                                <i class="fa fa-image"></i>&nbsp;&nbsp;Preview
                            </a>
                        </li>
                        <li>
                            <a href="#" ng-click="displayModalImage(vm.currentServer.url + '/' + shortUrl.shortCode + '/qr-code', 'QR code for ' + shortUrl.shortCode)">
                                <i class="fa fa-qrcode"></i>&nbsp;&nbsp;QR code
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#" ngclipboard data-clipboard-text="{{vm.currentServer.url}}/{{shortUrl.shortCode}}">
                                <i class="fa fa-clipboard"></i> Copy to clipboard
                            </a>
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
    </tbody>
</table>
<div pagination data-paginator="vm.shortUrls.pagination"></div>
